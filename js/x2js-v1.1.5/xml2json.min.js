function X2JS(e){function r(b){var c=b.localName;null==c&&(c=b.baseName);if(null==c||""==c)c=b.nodeName;return c}function p(b){return"string"==typeof b?b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):b}function s(b,c,a){switch(e.arrayAccessForm){case "property":b[c+"_asArray"]=b[c]instanceof Array?b[c]:[b[c]]}if(!(b[c]instanceof Array)&&0<e.arrayAccessFormPaths.length){for(var d=0;d<e.arrayAccessFormPaths.length;d++){var f=
e.arrayAccessFormPaths[d];if("string"===typeof f){if(f==a)break}else if(f instanceof RegExp){if(f.test(a))break}else if("function"===typeof f&&f(b,c,a))break}d!=e.arrayAccessFormPaths.length&&(b[c]=[b[c]])}}function t(b){var c=b.split(/[-T:+Z]/g),a=new Date(c[0],c[1]-1,c[2]),d=c[5].split(".");a.setHours(c[3],c[4],d[0]);1<d.length&&a.setMilliseconds(d[1]);c[6]&&c[7]?(c=60*c[6]+Number(c[7]),c=0+("-"==(/\d\d-\d\d:\d\d$/.test(b)?"-":"+")?-1*c:c),a.setMinutes(a.getMinutes()-c-a.getTimezoneOffset())):-1!==
b.indexOf("Z",b.length-1)&&(a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())));return a}function y(b,c,a){if(0<e.datetimeAccessFormPaths.length){a=a.split(".#")[0];for(var d=0;d<e.datetimeAccessFormPaths.length;d++){var f=e.datetimeAccessFormPaths[d];if("string"===typeof f){if(f==a)break}else if(f instanceof RegExp){if(f.test(a))break}else if("function"===typeof f&&f(obj,c,a))break}return d!=e.datetimeAccessFormPaths.length?
t(b):b}return b}function m(b,c){if(b.nodeType==l.DOCUMENT_NODE){for(var a={},d=b.childNodes,f=0;f<d.length;f++){var h=d.item(f);if(h.nodeType==l.ELEMENT_NODE){var g=r(h);a[g]=m(h,g)}}return a}if(b.nodeType==l.ELEMENT_NODE){a={__cnt:0};d=b.childNodes;for(f=0;f<d.length;f++)h=d.item(f),g=r(h),h.nodeType!=l.COMMENT_NODE&&(a.__cnt++,null==a[g]?(a[g]=m(h,c+"."+g),s(a,g,c+"."+g)):(null==a[g]||a[g]instanceof Array||(a[g]=[a[g]],s(a,g,c+"."+g)),a[g][a[g].length]=m(h,c+"."+g)));for(d=0;d<b.attributes.length;d++)f=
b.attributes.item(d),a.__cnt++,a[e.attributePrefix+f.name]=f.value;d=b.prefix;null!=d&&""!=d&&(a.__cnt++,a.__prefix=d);null!=a["#text"]&&(a.__text=a["#text"],a.__text instanceof Array&&(a.__text=a.__text.join("\n")),e.escapeMode&&(a.__text=a.__text.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")),e.stripWhitespaces&&(a.__text=a.__text.trim()),delete a["#text"],"property"==e.arrayAccessForm&&delete a["#text_asArray"],
a.__text=y(a.__text,g,c+"."+g));null!=a["#cdata-section"]&&(a.__cdata=a["#cdata-section"],delete a["#cdata-section"],"property"==e.arrayAccessForm&&delete a["#cdata-section_asArray"]);1==a.__cnt&&null!=a.__text?a=a.__text:0==a.__cnt&&"text"==e.emptyNodeForm?a="":1<a.__cnt&&null!=a.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==a.__text||""==a.__text.trim())&&delete a.__text;delete a.__cnt;!e.enableToStringFunc||null==a.__text&&null==a.__cdata||(a.toString=function(){return(null!=this.__text?
this.__text:"")+(null!=this.__cdata?this.__cdata:"")});return a}if(b.nodeType==l.TEXT_NODE||b.nodeType==l.CDATA_SECTION_NODE)return b.nodeValue}function k(b,c,a,d){c="<"+(null!=b&&null!=b.__prefix?b.__prefix+":":"")+c;if(null!=a)for(var f=0;f<a.length;f++){var h=a[f],g=b[h];e.escapeMode&&(g=p(g));c+=" "+h.substr(e.attributePrefix.length)+"='"+g+"'"}return d?c+"/>":c+">"}function n(b,c){return"</"+(null!=b.__prefix?b.__prefix+":":"")+c+">"}function u(b,c){var a;if(a="property"==e.arrayAccessForm)a=
c.toString(),a=-1!==a.indexOf("_asArray",a.length-8);return a||0==c.toString().indexOf(e.attributePrefix)||0==c.toString().indexOf("__")||b[c]instanceof Function?!0:!1}function v(b){var c=0;if(b instanceof Object)for(var a in b)u(b,a)||c++;return c}function w(b){var c=[];if(b instanceof Object)for(var a in b)-1==a.toString().indexOf("__")&&0==a.toString().indexOf(e.attributePrefix)&&c.push(a);return c}function x(b){var c="";if(b instanceof Object){var a="";null!=b.__cdata&&(a+="<![CDATA["+b.__cdata+
"]]\x3e");null!=b.__text&&(a=e.escapeMode?a+p(b.__text):a+b.__text);c+=a}else null!=b&&(c=e.escapeMode?c+p(b):c+b);return c}function q(b){var c="";if(0<v(b))for(var a in b)if(!u(b,a)){var d=b[a],f=w(d);if(null==d||void 0==d)c+=k(d,a,f,!0);else if(d instanceof Object)if(d instanceof Array){var e=a,g="";if(0==d.length)g+=k(d,e,f,!0);else for(f=0;f<d.length;f++)g+=k(d[f],e,w(d[f]),!1),g+=q(d[f]),g+=n(d[f],e);c+=g}else d instanceof Date?(c+=k(d,a,f,!1),c+=d.toISOString(),c+=n(d,a)):0<v(d)||null!=d.__text||
null!=d.__cdata?(c+=k(d,a,f,!1),c+=q(d),c+=n(d,a)):c+=k(d,a,f,!0);else c+=k(d,a,f,!1),c+=x(d),c+=n(d,a)}return c+=x(b)}e=e||{};void 0===e.escapeMode&&(e.escapeMode=!0);e.attributePrefix=e.attributePrefix||"_";e.arrayAccessForm=e.arrayAccessForm||"none";e.emptyNodeForm=e.emptyNodeForm||"text";void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0);e.arrayAccessFormPaths=e.arrayAccessFormPaths||[];void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0);void 0===e.stripWhitespaces&&(e.stripWhitespaces=
!0);e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[];(function(){function b(b){b=String(b);1===b.length&&(b="0"+b);return b}"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")});"function"!==typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+
"."+String((this.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"})})();var l={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(b){var c=window.ActiveXObject||"ActiveXObject"in window;if(void 0===b)return null;var a;if(window.DOMParser){var d=new window.DOMParser,e=null;if(!c)try{e=d.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(h){e=null}try{a=d.parseFromString(b,"text/xml"),null!=e&&0<a.getElementsByTagNameNS(e,
"parsererror").length&&(a=null)}catch(g){a=null}}else 0==b.indexOf("<?")&&(b=b.substr(b.indexOf("?>")+2)),a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(b);return a};this.asArray=function(b){return b instanceof Array?b:[b]};this.toXmlDateTime=function(b){return b instanceof Date?b.toISOString():"number"===typeof b?(new Date(b)).toISOString():null};this.asDateTime=function(b){return"string"==typeof b?t(b):b};this.xml2json=function(b){return m(b)};this.xml_str2json=function(b){b=
this.parseXmlString(b);return null!=b?this.xml2json(b):null};this.json2xml_str=function(b){return q(b)};this.json2xml=function(b){b=this.json2xml_str(b);return this.parseXmlString(b)};this.getVersion=function(){return"1.1.5"}};
