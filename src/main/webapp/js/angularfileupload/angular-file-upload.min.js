(function(){var h=angular.module("angularFileUpload",[]);h.service("$upload",["$http","$rootScope","$timeout",function(k,h,l){function m(a){a.method=a.method||"POST";a.headers=a.headers||{};a.transformRequest=a.transformRequest||function(a){return window.ArrayBuffer&&a instanceof ArrayBuffer?a:k.defaults.transformRequest[0](a)};window.XMLHttpRequest.__isShim&&(a.headers.__setXHR_=function(){return function(b){a.__XHR=b;b.upload.addEventListener("progress",function(b){a.progress&&l(function(){a.progress(b)})},
!1);b.upload.addEventListener("load",function(b){b.lengthComputable&&l(function(){a.progress(b)})},!1)}});var b=k(a);b.progress=function(d){a.progress=d;return b};b.abort=function(){a.__XHR&&l(function(){a.__XHR.abort()});return b};b.then=function(b,c){return function(e,f,g){a.progress=g||a.progress;c.apply(b,[e,f,g]);return b}}(b,b.then);return b}this.upload=function(a){a.headers=a.headers||{};a.headers["Content-Type"]=void 0;a.transformRequest=a.transformRequest||k.defaults.transformRequest;var b=
new FormData;if(a.data)for(var d in a.data){var c=a.data[d];if(a.formDataAppender)a.formDataAppender(b,d,c);else{if("function"==typeof a.transformRequest)c=a.transformRequest(c);else for(var e=0;e<a.transformRequest.length;e++){var f=a.transformRequest[e];"function"==typeof f&&(c=f(c))}b.append(d,c)}}a.transformRequest=angular.identity;d=a.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(a.file))for(c="[object String]"===Object.prototype.toString.call(d),e=0;e<a.file.length;e++)b.append(c?
d+e:d[e],a.file[e],a.file[e].name);else b.append(d,a.file,a.file.name);a.data=b;return m(a)};this.http=function(a){return m(a)}}]);h.directive("ngFileSelect",["$parse","$http","$timeout",function(k,h,l){return function(m,a,b){var d=k(b.ngFileSelect);a.bind("change",function(a){var b=[],f,g;f=a.target.files;if(null!=f)for(g=0;g<f.length;g++)b.push(f.item(g));l(function(){d(m,{$files:b,$event:a})})});a.bind("click",function(){this.value=null})}}]);h.directive("ngFileDropAvailable",["$parse","$http",
"$timeout",function(k,h,l){return function(m,a,b){if("draggable"in document.createElement("span")){var d=k(b.ngFileDropAvailable);l(function(){d(m)})}}}]);h.directive("ngFileDrop",["$parse","$http","$timeout",function(k,h,l){return function(h,a,b){if("draggable"in document.createElement("span")){var d=k(b.ngFileDrop);a[0].addEventListener("dragover",function(c){c.stopPropagation();c.preventDefault();a.addClass(b.ngFileDragOverClass||"dragover")},!1);a[0].addEventListener("dragleave",function(c){a.removeClass(b.ngFileDragOverClass||
"dragover")},!1);a[0].addEventListener("drop",function(c){c.stopPropagation();c.preventDefault();a.removeClass(b.ngFileDragOverClass||"dragover");var e=[],f=c.dataTransfer.files,g;if(null!=f)for(g=0;g<f.length;g++)e.push(f.item(g));l(function(){d(h,{$files:e,$event:c})})},!1)}}}])})();
